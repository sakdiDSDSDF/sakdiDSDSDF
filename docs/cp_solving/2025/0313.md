# éƒ¨åˆ†åšé¢˜è®°å½•

> è¿™é‡Œå°†è®°å½•æ¯å¤©å†™çš„ä¸€äº›ä¸å±äºæœ€æ–°çš„æ¯”èµ›é‡Œçš„é¢˜ç›®ï¼Œå¹¶ä¸”æ˜¯å¯¹å½“å‰çš„æˆ‘ç¨å¾®æœ‰ç‚¹éš¾åº¦çš„é¢˜ç›®ã€‚

## [CF2063D](https://codeforces.com/contest/2063/problem/D) *2000

> 2025-03-12

è¿™é¢˜å¹¶ä¸éš¾çš„ï¼Œæ²¡çœ‹é¢˜è§£45åˆ†é’Ÿå†™å‡ºæ¥çš„ï¼ŒWAäº†ä¸€å‘æ•°ç»„æ²¡å¼€ `ll` ï¼Œè€½è¯¯äº†ä¸‰å››åˆ†é’Ÿã€‚

é¦–å…ˆæˆ‘ä»¬å…ˆè€ƒè™‘ $x$ å– $1$ çš„ç­”æ¡ˆï¼Œå¿…ç„¶æ˜¯ä»ä¸Šé¢æˆ–è€…ä¸‹é¢é€‰ä¸¤ä¸ªè·ç¦»æœ€è¿œçš„ç‚¹ï¼Œå†ä»å¦ä¸€è¾¹éšä¾¿é€‰ä¸€ä¸ªç‚¹ã€‚

è€ƒè™‘ $x$ å– $2$ çš„æƒ…å†µå‘¢ï¼Œä¼šä¸ä¼šæŠŠ $x=1$ çš„ä¸‰ä¸ªç‚¹ç»™è¿˜åŸå›æ¥å‘¢? ä»€ä¹ˆæ—¶å€™ä¼šè¿˜åŸå›æ¥ï¼Ÿ

å¦‚æœä½ èƒ½ç›´æ¥å†é€‰ $3$ ä¸ªåˆæ³•çš„ç‚¹å‡ºæ¥ï¼Œé‚£ä¹ˆå°±ä¸éœ€è¦å†å»æ”¹ä¹‹å‰çš„æ–¹æ¡ˆäº†ã€‚

å› ä¸ºä½ é€‰å¦ä¸€è¾¹çš„ç‚¹å½“åº•è¾¹æ˜¾ç„¶ä¸ä¼šå½±å“è¿™ä¸€è¾¹çš„åº•è¾¹çš„é¢ç§¯ã€‚è‡³äºè¯´æŠŠè¿™ä¸¤ä¸ªç‚¹é‡æ–°åˆ†é…åˆ°è¿™è¾¹ç»„ä¸¤ä¸ªåº•è¾¹ï¼Œå°±æ›´ä¸å¯èƒ½äº†ã€‚

æ‰€ä»¥åªæœ‰å½“å‰çš„ç‚¹ä¸å¤Ÿå†å¼€ä¸€ä¸ªæ–°çš„ä¸‰è§’å½¢äº†ï¼Œæ‰æœ‰å¯èƒ½æ‹†ä¸€ä¸ªå·²ç»æ‹¼å¥½çš„ä¸‰è§’å½¢ã€‚å¹¶ä¸”æ‹†äº†ä¹‹åå¾—èƒ½æ‹¼å‡ºä¸¤ä¸ªä¸‰è§’å½¢æ‰è¡Œã€‚

è€ƒè™‘ä¸€ä¸‹ï¼Œæ‹†ä¸€ä¸ªä¸‰è§’å½¢ä¼šä½¿ä¸€è¾¹å¢åŠ 2ä¸ªç‚¹ï¼Œå¦ä¸€è¾¹åŠ 1ä¸ªç‚¹ã€‚æ–°æ‹¼æˆçš„ä¸¤ä¸ªä¸‰è§’å½¢çš„é¡¶ç‚¹æ˜¯ä¸€å®šåœ¨åŒä¸€æ¡è¾¹ä¸Šçš„ã€‚ã€‚ã€‚æˆ‘ä¸Šåˆå†™çš„æ—¶å€™éƒ½æ²¡è€ƒè™‘è¿™ä¸ªæ¥ç€ï¼Œå°±åªæƒ³ç€æ˜¯ä¼šåœ¨åŒä¸€è¾¹ï¼Œè™½ç„¶è¿™ç¡®å®æŒºç›´è§‰çš„ï¼Œä¹Ÿå¾ˆå¥½æ¨çš„ã€‚å¯èƒ½æ˜¯å› ä¸ºæ ·ä¾‹çš„æç¤ºå§ã€‚

ç„¶åå°±æ˜¯ç›´æ¥æ¨¡æ‹Ÿå°±å¥½äº†ã€‚ æ‹†ä¸€ä¸ªä¸‰è§’å½¢çš„è¯ï¼Œè‚¯å®šå¾—åˆ è¾¹æœ€çŸ­çš„é‚£ä¸ªã€‚

```cpp
void ChatGptDeepSeek()
{
    // ä¸»è¦æ˜¯çœ‹ä¸Šé¢å–å¤šå°‘ä¸ª ä¸‹é¢å–å¤šå°‘ä¸ª
    int n, m;
    cin >> n >> m;
    vector<int> a(n + 1), b(m + 1);
    set<int> u, d;
    priority_queue<int, vector<int>, greater<>> uq, dq;
    for (int i = 1; i <= n; i++)
        cin >> a[i], u.insert(a[i]);
    for (int i = 1; i <= m; i++)
        cin >> b[i], d.insert(b[i]);
    int U = 0, D = 0;
    ll ans = 0;
    vector<ll> res;
    for (int i = 1;; i++)
    {
        int uu = 0, dd = 0;
        if (u.size() >= U + 2 && d.size() >= D + 1)
        {
            uu = *u.rbegin() - *u.begin();
        }
        if (d.size() >= D + 2 && u.size() >= U + 1)
        {
            dd = *d.rbegin() - *d.begin();
        }
        // cerr<<dd<<" "<<uu<<'\n';
        if (dd + uu == 0)
        {
            // cerr<<u.size()<<" "<<U<<" "<<d.size()<<" "<<D<<'\n';
            // cerr<<"empty: "<<uq.size()<<'\n';
            // ä¸Šé¢çš„å‡å»ä¸¤ä¸ªï¼Œæˆ–è€…æ˜¯ä¸‹é¢çš„å‡å»ä¸¤ä¸ª
            if (u.size() >= U + 3 && !dq.empty())
            {
                ans += *u.rbegin() - *u.begin();
                // uq.push(*u.rbegin() - *u.begin());
                u.erase(u.begin()), u.erase(prev(u.end()));
                ans += *u.rbegin() - *u.begin();
                // uq.push(*u.rbegin() - *u.begin());
                u.erase(u.begin()), u.erase(prev(u.end()));
                ans -= dq.top();
                dq.pop();
                U--;
            }
            else if (d.size() >= D + 3 && !uq.empty())
            {
                // cerr<<"here\n";
                ans += *d.rbegin() - *d.begin();
                // dq.push(*d.rbegin() - *d.begin());
                d.erase(d.begin()), d.erase(prev(d.end()));
                ans += *d.rbegin() - *d.begin();
                // dq.push(*d.rbegin() - *d.begin());
                d.erase(d.begin()), d.erase(prev(d.end()));
                ans -= uq.top();
                uq.pop();
                D--;
            }
            else
                break;
        }
        else if (dd >= uu)
        {
            d.erase(d.begin());
            d.erase(prev(d.end()));
            U++;
            ans += dd;
            dq.push(dd);
        }
        else
        {
            u.erase(u.begin());
            u.erase(prev(u.end()));
            D++;
            ans += uu;
            uq.push(uu);
        }
        // cout<<ans<<" ";
        res.push_back(ans);
    }
    cout << res.size() << '\n';
    for (auto x : res)
        cout << x << " ";
    cout << '\n';
}
```

## [CF2069E](https://codeforces.com/contest/2069/problem/E) *2300

> 2025-03-14

ç”±äºæ˜¯æ²¡æœ‰ AA å’Œ BB è¿™ç§çš„ï¼Œæ‰€ä»¥è¿ç€çš„ A B ï¼Œ æˆ‘ä»¬åªèƒ½èŠ±å•ä¸ªçš„ A å’Œ B ã€‚æ‰€ä»¥æˆ‘ä»¬å¯ä»¥æŠŠåºåˆ—æ‹†æˆè‹¥å¹²ä¸ªé¦–å°¾ä¸åŒçš„åºåˆ—ã€‚

ä¾‹å¦‚ ABABA ABABAB BABAB BABA è¿™ç§ã€‚çœ‹èµ·æ¥ä¼šä¸å¤ªå¥½å¤„ç†ã€‚ã€‚ä½†æ˜¯å½“ä½ çœ‹äº†é¢˜è§£ä¹‹åå°±å¾ˆç®€å•äº†ã€‚ã€‚è§‚å¯Ÿä¸€ä¸‹ï¼Œå¯¹äºå¥‡æ•°é•¿åº¦çš„ï¼Œæˆ‘ä»¬ä½¿ç”¨ AB å’Œ BA ï¼Œ é¢å¤–çš„å•ä¸ªçš„èŠ±è´¹æ˜¯ç›¸åŒçš„ã€‚ä½†æ˜¯å¶æ•°é•¿åº¦çš„ ABABAB å¦‚æœè¦ç”¨ BA çš„è¯ä¼šæ¯”ä½¿ç”¨ AB å¤šä¸€ä¸ªé¢å¤–çš„èŠ±è´¹ã€‚BABABA åŒç†ã€‚

æ‰€ä»¥æˆ‘ä»¬ä¼˜å…ˆæŠŠå¶æ•°é•¿åº¦çš„å¤„ç†å®Œï¼Œç„¶åå‰©ä¸‹çš„å¤šçš„æ•°é‡å°±å»å¤„ç†å…¶ä»–çš„ã€‚å¹¶ä¸”æˆ‘ä»¬æ¯ç”¨å¯¹åº”çš„ AB æˆ– BA å¤„ç†å®Œä¸€ä¸ªå¶æ•°é•¿åº¦çš„åºåˆ—éƒ½å¯ä»¥çœä¸€äº›èŠ±è´¹ï¼Œæ‰€ä»¥æˆ‘ä»¬å…ˆå¤„ç†é•¿åº¦è¾ƒçŸ­çš„å­—ç¬¦ä¸²ã€‚

ç„¶åå°±å¥½å¥½åˆ†ç±»è®¨è®ºå°±å¥½äº†ã€‚ï¼ˆå…¶å®éƒ½æ²¡å¿…è¦å­˜å­—ç¬¦ä¸²

```cpp
void ChatGptDeepSeek()
{
    string s;
    cin >> s;
    int a, b, ab, ba;
    cin >> a >> b >> ab >> ba;
    vector<string> v;
    for (int i = 0; i < s.size(); i++) {
        int j = i + 1;
        string t(1, s[i]);
        while (j < s.size() && s[j] != s[j - 1]) {
            t += s[j];
            j++;
        }
        i = j - 1;
        if (t.size() > 1)
            v.push_back(t);
    }
    sort(v.begin(), v.end(), [](string x, string y) {
        if ((x.size() ^ y.size() ^ 1) & 1)
            return x.size() < y.size();
        // if(x.size()==y.size())
        //     return x<y;
        return x.size() % 2 < y.size() % 2;
    });
    int A = count(s.begin(), s.end(), 'A'), B = s.size() - A;
    for (auto x : v) {
        // cerr<<x<<" \n";
        int len = x.size();
        if (x.size() & 1) {
            // å¥‡æ•°ç”¨è°éƒ½ä¸€æ ·çš„
            while (ab && len > 1) {
                A--, B--;
                ab--;
                len -= 2;
            }
            while (ba && len > 1) {
                A--, B--;
                ba--;
                len -= 2;
            }
        } else {
            if (x.front() == 'A') {
                if (ab >= len / 2) {
                    ab -= len / 2;
                    A -= len / 2, B -= len / 2;
                    len = 0;
                    // cerr<<ab<<'\n';
                } else {
                    len -= 2 * ab;
                    A -= ab, B -= ab;
                    ab = 0;
                }
                if (len) {
                    if (ba >= (len - 2) / 2) {
                        ba -= (len - 2) / 2;
                        A -= (len - 2) / 2, B -= (len - 2) / 2;
                    } else {
                        A -= ba, B -= ba, ba = 0;
                    }
                }
            } else {
                if (ba >= len / 2) {
                    ba -= len / 2;
                    A -= len / 2, B -= len / 2;
                    len = 0;
                } else {
                    len -= 2 * ba;
                    A -= ba, B -= ba;
                    ba = 0;
                }
                if (len) {
                    if (ab >= (len - 2) / 2) {
                        ab -= (len - 2) / 2;
                        A -= (len - 2) / 2, B -= (len - 2) / 2;
                    } else {
                        A -= ab, B -= ab, ab = 0;
                    }
                }
            }
        }
    }
    // cerr<<ab<<" "<<ba<<'\n';
    assert(A >= 0 && B >= 0);
    if (A <= a && B <= b)
        cout << "YES\n";
    else
        cout << "NO\n";
}
```

## [CF1981C](https://codeforces.com/contest/1981/problem/C) *1800

> 2025-03-14

å¥½é¢˜ã€‚ã€‚

å¯ä»¥çœ‹æˆä¸€é¢—æ»¡äºŒå‰æ ‘ï¼Œ $x$ å¯ä»¥èµ°åˆ° $2x$ å’Œ $2x+1$ ï¼Œè¿™æ­£å¥½å¯¹åº”çš„æ˜¯äºŒå‰æ ‘ä¸Šçš„ä¸¤ä¸ªå­èŠ‚ç‚¹ã€‚ä½†æ˜¯çŸ¥é“äº†è¿™ä¸ªä¹Ÿç¡®å®æ²¡åŠæ³•åšå§ã€‚

äºæ˜¯é¢˜è§£å‘Šè¯‰æˆ‘ä»¬è¿™é¢˜ä¸ LCA æœ‰å…³ã€‚ç„¶åæˆ‘å»çœ‹äº†ä¸‹ LCA ï¼Œå›æ¥å‘ç°ï¼Œè¿™è¿™ä¸å¯¹å•Š $10^8$ è¿™è®©æˆ‘æ€ä¹ˆ LCA å•Šã€‚ã€‚ã€‚

è¿™é¢˜å¯ä»¥è½¬æ¢æˆç»™ä¸¤ä¸ªäºŒå‰æ ‘çš„ç‚¹ï¼Œæˆ‘ä»¬è¦ä½¿å®ƒä»¬ç›¸é‡ã€‚é‚£ä¹ˆæœ€çŸ­çš„è·ç¦»å°±æ˜¯åœ¨å®ƒä»¬ä¸¤åˆ°LCAçš„è·¯å¾„ä¸Š ï¼Œç„¶åå¦‚æœæœ‰å¤šçš„æ­¥æ•°ï¼Œå°±æ¯æ¬¡èµ°åˆ°ç›¸é‚»çš„å†èµ°å›æ¥å°±è¡Œã€‚å½“ç„¶å‰©ä½™çš„æ­¥æ•°å¿…é¡»æ˜¯å¶æ•°æ‰è¡Œã€‚

è€ƒè™‘ä¸€ä¸‹ å†å®ƒä»¬èµ°åˆ° ç›¸é‡ ä¹‹å‰ï¼Œè·¯å¾„å·²ç»æ˜¯æœ€çŸ­çš„äº†ï¼Œæ‰€ä»¥åªèƒ½é¢å¤–æ¶ˆè€—æ­¥æ•°ã€‚è¿™ä¸€ä¸ªè¿‡ç¨‹æ˜¯æ²¡æœ‰åŠæ³•æ¶ˆè€—å¥‡æ•°æ­¥çš„ã€‚å› ä¸ºæ¯”å¦‚ä¸€ä¸ªèŠ‚ç‚¹åé€€äº†ä¸€æ­¥ï¼Œé‚£ä¹ˆè¿™ä¸€æ­¥åé¢ä¹Ÿæ˜¯ä¼šè¡¥å›æ¥çš„ æˆ–è€…è¯´æ˜¯æ¶ˆè€—äº†ä½ çš„ä¸€ä¸ªå‰è¿›çš„æ­¥æ•°ï¼Œæ‰€ä»¥æ€»ä½“ä¸€ç›´æ˜¯å¥‡å¶ä¿æŒä¸å˜çš„ã€‚

è€Œå®ƒä»¬ç›¸é‡ä¹‹åï¼ŒåŒæ ·ä¸å¯èƒ½å»æ¶ˆè€—å¥‡æ•°æ­¥ï¼Œè¦ä¹ˆä¸€ä¸ªèŠ‚ç‚¹å‡ºå»å†å›æ¥ï¼Œè¿™æ ·æ˜¯ 2 å€çš„è·¯ç¨‹ï¼Œæ¶ˆè€—å¿…ç„¶æ˜¯å¶æ•°ï¼Œå¦‚æœå®ƒä»¬ä¸€èµ·èµ°ï¼Œé‚£æ¶ˆè€—çš„æ­¥æ•°ä¹Ÿå¿…ç„¶æ˜¯å¶æ•°ã€‚

æ‰€ä»¥ç°åœ¨é—®é¢˜è½¬æ¢æˆäº†å¦‚ä½•è®©å®ƒä»¬èµ°åˆ° LCA ä¸Šï¼Œçœ‹äº†å“¥å“¥çš„ä»£ç ï¼Œå¤ªç‰›äº†ã€‚ã€‚ã€‚å°±æ˜¯å·¦å³ç«¯ç‚¹ï¼Œå“ªä¸ªå¤§å°±æŠŠå“ªä¸ªé™¤ä»¥äºŒã€‚ã€‚è¿™å°±æ˜¯ç›¸å½“äºæŠŠä¸€ä¸ªç‚¹å¾€ä¸Šç§»äº†ä¸€å±‚ï¼Œæˆ‘ä»¬æœ€ç»ˆæ˜¯è¦æŠŠä¸¤ä¸ªç‚¹éƒ½ç§»åŠ¨åˆ° LCA é‚£ä¸€å±‚ã€‚è€Œç”±äºæ˜¯ä¸€é¢—æ»¡äºŒå‰æ ‘ï¼Œæ‰€ä»¥æœ€å¤šåªä¼šæœ‰äºŒä¸‰åå±‚çš„ã€‚å¦‚æœä¸€ä¸ªèŠ‚ç‚¹æ•°å€¼æ›´å¤§ï¼Œé‚£ä¹ˆå®ƒçš„å±‚æ•°ä¸€å®šæ˜¯å¤§äºç­‰äºå¦ä¸€ä¸ªç‚¹çš„ã€‚

```cpp
void ChatGptDeepSeek()
{
    int n;
    cin >> n;
    vector<int> a(n + 1);
    for (int i = 1; i <= n; i++)
        cin >> a[i];
    a[0] = 1;
    int l = -1, r = 0;
    for (int i = 1; i <= n; i++) {
        if (a[i] != -1) {
            r = i;
            if (l == -1) {
                for (int j = i - 1; j >= 1; j--)
                    a[j] = a[j + 1] == 1 ? 2 : a[j + 1] / 2;
            } else {
                int L = l, R = r;
                while (L < R - 1) {
                    if (a[L] >= a[R]) {
                        a[L + 1] = a[L] == 1 ? 2 : a[L] / 2;
                        L++;
                    } else {
                        a[R - 1] = a[R - 1] == 1 ? 2 : a[R] / 2;
                        R--;
                    }
                }
                if (a[L] != a[R] / 2 && a[L] / 2 != a[R]) {
                    cout << "-1\n";
                    return;
                }
            }
            l=i;
        }
    }
    for (int i = r + 1; i <= n; i++)
        a[i] = a[i - 1] == 1 ? 2 : a[i - 1] / 2;
    for (int i = 1; i <= n; i++)
        cout << a[i] << " \n"[i == n];
}
```

å°±åƒè¿™é¢˜ä»¥åŠå¾ˆå¤šçš„ CF é¢˜ï¼Œä½ è¦é—®ç”¨äº†ä»€ä¹ˆç®—æ³•ï¼Œå¥½åƒçœŸæ²¡ä»€ä¹ˆç®—æ³•ã€‚ä½†ä½ è¦è¯´éš¾ä¸éš¾ã€‚ã€‚ã€‚æˆ‘æ„Ÿè§‰è¿˜æ˜¯æŒºéš¾çš„ã€‚

å¤šåšç‚¹å¥½é¢˜å§ï¼Œç§¯æ”’ä¸€ä¸‹ï¼ˆï¼‰ã€‚

## [CF1975D](https://codeforces.com/contest/1975/problem/D) *1700

> 2025-03-17

å¾ˆå¥½çš„é¢˜ç›®ï¼Œå³ä½¿æ˜¯æˆ‘ä¹Ÿèƒ½æ„Ÿåˆ°å¿ƒæ½®æ¾æ¹ƒã€‚

æˆ‘ä»¬å¸Œæœ›è“è‰²çš„ç‚¹æ—©ç‚¹èµ°åˆ°è¢«æŸ“æˆçº¢è‰²çš„ç‚¹ä¸Šã€‚

å› ä¸ºä»ä¸€ä¸ªç‚¹éå†æ ‘ï¼Œæœ€å°‘çš„æƒ…å†µæ¯ä¸ªè¾¹éƒ½ä¼šè¢«èµ° $2$ éï¼Œä½†æ˜¯è¿™ä¸ªæƒ…å†µä¸‹æˆ‘ä»¬æœ€åä¸€æ¬¡æ˜¯ä¸ç”¨å›å»çš„ã€‚

æ‰€ä»¥è´¡çŒ®ä¼šå‡å»æœ€åå»çš„ä¸€ä¸ªç‚¹åˆ°æ ¹èŠ‚ç‚¹çš„è·ç¦»ï¼Œæ‰€ä»¥æˆ‘ä»¬å¸Œæœ›æœ€åä¸€ä¸ªç‚¹è·ç¦»æ ¹èŠ‚ç‚¹å°½é‡çš„è¿œã€‚å¹¶ä¸”è“è‰²çš„ç‚¹è‚¯å®šä¸€èµ°åˆ°çº¢è‰²çš„åŒºåŸŸå°±è¯¥å¼€å§‹äº†ï¼Œå› ä¸ºçº¢è‰²å¯ä»¥è‡ªåŠ¨å»æŠŠè“è‰²è¯¥èµ°çš„åœ°æ–¹ç»™èµ°äº†ã€‚è€Œä¸”å³ä½¿è¿™æ—¶è°ƒæ•´ä½ç½®ï¼Œè·ç¦»æ ¹èŠ‚ç‚¹æœ€å¤§çš„è·ç¦»ä¹Ÿæœ€å¤šåªä¼šå‡ä¸€ï¼Œå¹¶ä¸ä¼šä½¿å¾—ç­”æ¡ˆæ›´å°ã€‚

```cpp
// æ„Ÿè§‰åªèƒ½ä¸€ä¸ªå­æ ‘ä¸€ä¸ªå­æ ‘çš„èµ°ã€‚ã€‚ã€‚
// å¦‚æœè“è‰²çš„ä¸åœ¨æ ¹èŠ‚ç‚¹æˆ–ä¸æ ¹ç›¸è¿
// é‚£ä¹ˆæˆ‘ä»¬è‚¯å®šè®©çº¢è‰²çš„å…ˆèµ°å®ƒåœ¨çš„å­æ ‘
// ç„¶åå®ƒè‡ªå·±èµ°åˆ°æ·±åº¦ä¸º1çš„ç‚¹å°±å¥½äº† å¦åˆ™å®ƒéœ€è¦èµ°åˆ°æ ¹èŠ‚ç‚¹å»
// å¦‚æœåœ¨æ ¹èŠ‚ç‚¹ é‚£ä¹ˆéœ€è¦é¢å¤–èŠ±è´¹ä¸¤ä¸ªè´¹ç”¨
// éå†ä¸€ä¸ªå­æ ‘å¿…ç„¶ä¼šæŠŠè¿™ä¸ªå­æ ‘çš„æ¯æ¡è¾¹éƒ½èµ°ä¸¤æ¬¡ é™¤äº†æœ€åå»çš„ä¸€äº›è¾¹ã€‚ã€‚
// ã€‚ã€‚ã€‚ã€‚å¥½åƒå¾ˆä¸å¥½è®¨è®ºçš„ã€‚ã€‚ã€‚ã€‚

// å¥½åƒè¿˜çœŸæ˜¯ä»€ä¹ˆå¾ˆç¥å¥‡çš„ç»“è®ºã€‚ã€‚ã€‚
// å¤ªç‰›ï¼Œä¹Ÿæ˜¯ç›´æ¥çœ‹äº†é¢˜è§£ã€‚ã€‚
// éå†ä¸€é¢—æ ‘ å¦‚æœæœ€åè¦å›åˆ°æ ¹èŠ‚ç‚¹ é‚£ä¹ˆæœ€å°çš„èµ°çš„è·¯ç¨‹å°±æ˜¯æ¯æ¡è¾¹éƒ½èµ°ä¸¤æ¬¡
// ä½†æ˜¯å¦‚æœæœ€åä¸å›æ¥å‘¢ï¼Ÿå®é™…ä¸Šå°±æ˜¯å‡å°‘äº†æœ€åä¸€ä¸ªç‚¹åˆ°æ ¹èŠ‚ç‚¹çš„è·ç¦»
// æ‰€ä»¥å¦‚æœæœ€åä¸å›æ¥ï¼Œé‚£æˆ‘ä»¬å¸Œæœ›å®ƒæœ€åä¸€ä¸ªå»çš„ç‚¹è·ç¦»æ ¹èŠ‚ç‚¹æœ€è¿œ

// æ‰€ä»¥æˆ‘ä»¬å¸Œæœ›a b å°½å¯èƒ½å¿«çš„ç›¸é‡ã€‚ã€‚
// æ— æ³•ç›¸é‡ä¹Ÿæ²¡å…³ç³»ã€‚å› ä¸ºé‚£å°±ç›¸å½“äºçº¢è‰²æ¯”è“è‰²å¤šä¸€æ­¥äº†ï¼Œé‚£å®ƒæ˜¾ç„¶å¯ä»¥å»æå‰æŠŠè“è‰²è¦èµ°çš„è·¯ç»™æŸ“è‰²å¥½
// å¦‚æœå¯ä»¥ç›¸é‡ é‚£å°±æ­£å¥½ä¸€èµ·èµ°å°±ç›´æ¥æŸ“æˆè“è‰²
// æ‰€ä»¥å…¶å®å°±æ˜¯å¸Œæœ›è“è‰²çš„ç‚¹å°½å¯èƒ½å¿«åœ°èµ°åˆ°è¢«æŸ“æˆçº¢è‰²çš„ç‚¹

// æ‰€ä»¥æœ€åçš„ç­”æ¡ˆå°±æ˜¯ï¼Œ2(n-1)-d
// d ä¸º a b ç›¸é‡çš„ç‚¹åˆ°æœ€è¿œçš„ç‚¹çš„è·ç¦»
// æœ‰æ²¡æœ‰å¯èƒ½ç§»åŠ¨åˆå§‹çš„ç‚¹ä½¿å¾—d æ›´å¤§å‘¢ï¼Ÿæ²¡æœ‰
// å› ä¸ºä½ ä¸€æ¬¡ç§»åŠ¨æœ€å¤šå°±ä½¿å¾—d+1 è¿™è·Ÿä¸ç§»åŠ¨ æ²¡å•¥åŒºåˆ«

// Date: 2025-03-17
// Time: 16:25:11

#include <bits/stdc++.h>
using namespace std;

void ChatGptDeepSeek()
{
    int n;
    cin >> n;
    int a, b;
    cin >> a >> b;
    vector<vector<int>> adj(n + 1, vector<int>());
    for (int i = 1; i < n; i++) {
        int u, v;
        cin >> u >> v;
        adj[u].push_back(v);
        adj[v].push_back(u);
    }
    vector<int> dep(n + 1), f(n + 1);
    auto dfs = [&](auto&& self, int u, int pre) -> void {
        for (auto v : adj[u]) {
            if (v == pre)
                continue;
            f[v] = u;
            dep[v] = dep[u] + 1;
            self(self, v, u);
        }
    };
    dfs(dfs, a, 0);
    int st = b, ans = 2 * (n - 1);
    for (int i = 1; i <= dep[b] / 2; i++, ans++)
        st = f[st];
    if(dep[b]&1) st=f[st],ans++;
    dep[st] = 0;
    dfs(dfs, st, 0);
    cout << ans - *max_element(dep.begin() + 1, dep.end()) << '\n';
}

int main()
{
    ios::sync_with_stdio(false);
    cin.tie(nullptr);
    cout.tie(nullptr);
    int T = 1;
    cin >> T;
    while (T--)
        ChatGptDeepSeek();
    return 0;
}
```

## [CF1974E](https://codeforces.com/contest/1974/problem/E) *1800

> 2025-03-17

å…¶å®å°±æ˜¯ä¸€ä¸ªéå¸¸åŸºç¡€çš„dpå•Šã€‚ã€‚ã€‚

ä½†æ˜¯æˆ‘ WA + TLE å¥½å¤šå‘ã€‚

```cpp
		vector ndp = dp;
        for (int j = 0; j + h[i] < dp.size(); j++) {
            if (have >= dp[j] + c[i]) {
                ndp[j + h[i]] = min(ndp[j + h[i]], dp[j] + c[i]);
                assert(j + h[i] <= m * 1000);
            }
        }
        dp = ndp;
        have += x;
```

åˆšå¼€å§‹æ˜¯è¿™æ ·å†™çš„ï¼Œä¹‹å‰ä¸€èˆ¬éƒ½è¿™æ ·å†™çš„ã€‚ã€‚ã€‚ä½†æ˜¯æˆ‘å‘ç°è¿™å…¶å®æ²¡å¿…è¦å¤šå¼€ä¸€ä¸ªæ•°ç»„ã€‚ã€‚ã€‚å› ä¸ºåªä¼šå½±å“åé¢çš„ï¼Œæ‰€ä»¥ç›´æ¥å€’ç€éå†å°±å¯ä»¥ã€‚ã€‚

```cpp
        for (int j = n; j - h[i] >= 0; j--) {
            if (dp[j - h[i]] + c[i] <= have)
                dp[j] = min(dp[j], dp[j - h[i]] + c[i]);
        }
        have += x;
```

ä½†æ˜¯ $2202ms$ ï¼Œ åŸå› æ˜¯æˆ‘å¼€çš„ vector ä»¥åŠæ¯æ¬¡éƒ½å¼€çš„æœ€å¤§çš„ï¼Œè™½ç„¶è¿‡äº†å•Šï¼Œä½†æ˜¯å…¶å®é¢˜ç›®é™åˆ¶äº† $\sum h_i$ ï¼Œæˆ‘ç†è§£æœ‰é—®é¢˜å•Šï¼Œé‚£å…¶å®å°±è¯¥ç›´æ¥æ¯æ¬¡å¼€ $\sum h$ çš„ç©ºé—´å°±è¡Œäº†ã€‚

```cpp
using ll = long long;

constexpr ll inf = 1e18;
ll dp[1000 * 100 + 1];

void ChatGptDeepSeek()
{
    int m, x;
    cin >> m >> x;
    vector<int> c(m + 1), h(m + 1);
    int n = 0;
    for (int i = 1; i <= m; i++) {
        cin >> c[i] >> h[i];
        for (int j = 1; j <= h[i]; j++)
            dp[n + j] = inf;
        n += h[i];
    }
    // vector<ll> dp(1000 * m + 1, inf);

    dp[0] = 0;
    ll have = 0;
    for (int i = 1; i <= m; i++) {
        // vector ndp = dp;
        for (int j = n; j - h[i] >= 0; j--) {
            if (dp[j - h[i]] + c[i] <= have)
                dp[j] = min(dp[j], dp[j - h[i]] + c[i]);
        }
        have += x;
    }
    for (int i = n; i >= 0; i--) {
        if (dp[i] != inf) {
            cout << i << "\n";
            return;
        }
    }
}
```

## [æ´›è°·P10865](https://www.luogu.com.cn/problem/P10865) æ™®åŠ+/æé«˜

> 2025-03-18
>
> å»å¹´æ¯”èµ›æ²¡æ—¶é—´çœ‹ï¼Œè™½ç„¶çœ‹äº†ä¹Ÿè‚¯å®šä¸ä¼šå†™ã€‚å¶ç„¶ç¿»é¢˜å•åœ¨çŠ¶å‹DPé‡Œç¿»åˆ°ï¼Œï¼Œä½†æ˜¯æˆ‘è¿å•¥å«çŠ¶å‹DPéƒ½ä¸å¤ªè®°å¾—äº†ï¼Œä¹‹å‰åªçœ‹è¿‡å‡ é¢˜ã€‚

å…¶å®æ˜¯æ˜¨å¤©å…ˆçœ‹äº†ä¸‹é¢˜è§£ï¼Œå¤§æ¦‚çŸ¥é“è¦ç”¨çŠ¶å‹ DP ï¼Œç„¶åæ¯ä¸¤ä½è¡¨ç¤ºä¸€ä¸ªæœ‰é±¼çš„å•å…ƒæ ¼çš„çŠ¶æ€ã€‚

å› ä¸ºæ¯ä¸ªæ± å¡˜çš„é±¼çš„æ•°é‡æœ€å¤šåªæœ‰3ï¼Œæ‰€ä»¥æˆ‘ä»¬ç”¨2ä½äºŒè¿›åˆ¶ä½å°±å¯ä»¥è¡¨ç¤ºå‡ºæ¥ã€‚æ€»å…±éœ€è¦ $2k$ ä½ã€‚ç”±äº $k$ å¾ˆå°ï¼Œæ‰€ä»¥å°±å¯ä»¥è¿™æ ·ã€‚

å¹¶ä¸”è¿˜æœ‰ä¸€ä¸ªå¾ˆå…³é”®çš„ä¿¡æ¯å°±æ˜¯ï¼Œæ¯ä¸ªç‚¸å¼¹æœ€å¤šåªèƒ½ç‚¸äº”ä¸ªå•å…ƒæ ¼ï¼Œå¹¶ä¸”å½¢çŠ¶æ˜¯å›ºå®šçš„ã€‚æ‰€ä»¥æ¯ä¸ªæ± å¡˜æœ€å¤šåªä¼šè¢«5ä¸ªå•å…ƒæ ¼ç»™ç‚¸åˆ°ã€‚

æ‰€ä»¥æ€»å…±æœ€å¤šåªæœ‰ $5k$ ä¸ªæ± å¡˜æœ‰å¯èƒ½è¢«æ”¾ç½®ç‚¸å¼¹ã€‚æˆ‘ä»¬æšä¸¾æ¯ä¸€ä¸ªçŠ¶æ€ï¼Œçœ‹ä½¿ç”¨æ¯ä¸€ä¸ªç‚¸å¼¹ä¼šè½¬ç§»åˆ°ä»€ä¹ˆçŠ¶æ€ã€‚

æœ€åæˆ‘ä»¬éœ€è¦è¾“å‡ºé±¼å…¨éƒ½è¢«ç‚¸ä¼¼çš„æœ€å°çš„ç­”æ¡ˆï¼Œä¹Ÿå°±æ˜¯ $dp_0$ ã€‚

```cpp
int mp[1001][1001];

void ChatGptDeepSeek()
{
    memset(mp, -1, sizeof mp);
    // cerr<<mp[0][0]<<'\n';
    int n, m, k;
    cin >> n >> m >> k;
    vector<int> x(k), y(k), a(k);
    int now = 0;
    // map<pair<int, int>, int> mp;
    for (int i = 0; i < k; i++) {
        cin >> x[i] >> y[i] >> a[i];
        mp[x[i]][y[i]] = i;
        // mp[{ x[i], y[i] }] = i;
        now |= (a[i] << (2 * i));
    }
    // 10 01 10
    // cerr << now << '\n';
    vector<int> dp(now + 1, 666);
    dp[now] = 0;
    vector<pair<int, int>> dir { { 0, 0 }, { 0, 1 }, { 0, -1 }, { 1, 0 }, { -1, 0 } };
    auto calc = [&](int now_val, int i, int j) {
        for (auto it : dir) {
            int nx = i + it.first, ny = j + it.second;
            if (nx > n || nx < 1 || ny > m || ny < 1)
                continue;
            if (mp[nx][ny] != -1) {
                int xx = (now_val >> (2 * mp[nx][ny])) & 3;
                assert(xx <= 3 && xx >= 0);
                now_val ^= (xx << (2 * mp[nx][ny]));
                xx = max(0, xx - 1);
                now_val |= (xx << (2 * mp[nx][ny]));
            }
        }
        return now_val;
    };
    //k * 2**20
    //k*1e6*5
    for (int i = 0; i < k; i++) {
        for (auto it : dir) {
            int nx = x[i] + it.first, ny = y[i] + it.second;
            if (nx > n || nx < 1 || ny > m || ny < 1)
                continue;
            // for (int _ = 1; _ <= 3; _++)
            for (int j = now; j >= 0; j--) {
                int nxt = calc(j, nx, ny);
                assert(nxt <= j);
                dp[nxt] = min(dp[nxt], dp[j] + 1);
            }
        }
    }
    cout << dp[0] << '\n';
}
```

ç„¶åå…¶å®å°±æ˜¯ä¸€äº›ç®€å•çš„æ“ä½œäº†ã€‚ã€‚ä½†æ˜¯æˆ‘æŠŠ map æ”¹æˆæ•°ç»„å°±ä¸è¶…æ—¶äº†ã€‚ã€‚

ä½†æ˜¯æ—¶é—´æœ€å¤š 500ms äº†ï¼Œç®—æ¯”è¾ƒæ…¢çš„äº†ã€‚çœ‹äº†åˆ«äººçš„æ›´å¿«ä»£ç å‘ç°ï¼Œæœ‰çš„æ˜¯ DFS ï¼Œæœ‰çš„æ˜¯æŠŠçŠ¶æ€æ”¾å¤–å±‚ï¼Œå¦‚æœä¸æ˜¯åˆæ³•çŠ¶æ€å°±è·³è¿‡ï¼Œå¯ä»¥å‡å°‘å¾ˆå¤šçš„æ—¶é—´ã€‚

æ”¹äº†ä¹‹åå˜æˆ 240msã€‚ã€‚è™½ç„¶å†™äº†ååˆ†é’Ÿå¤šï¼Œä¸”å†™é”™äº†çœ‹äº†ä¸€ä¼šæ‰çœ‹å‡ºæ¥ã€‚ã€‚æˆ‘æŠŠ `ny>m || ny<1` å†™æˆäº† `ny>m || ny>m` ã€‚

```cpp
    for (int i = now; i >= 0; i--) {
        {
            int tmp = i;
            bool skip = false;
            for (int j = 0; j < k; j++) {
                if ((tmp & 3) > a[j]) {
                    skip = true;
                    break;
                }
                tmp >>= 2;
            }
            if (skip)
                continue;
        }
        // cerr<<i<<" "<<dp[i]<<" \n";
        for (int j = 0; j < k; j++) {
            for (auto it : dir) {
                int nx = x[j] + it.first, ny = y[j] + it.second;
                if (nx > n || nx < 1 || ny > m || ny < 1)
                    continue;
                int nxt = calc(i, nx, ny);
                // cerr<<nxt<<'\n';
                dp[nxt] = min(dp[nxt], dp[i] + 1);
            }
        }
    }
```

## [æ´›è°·P10864](https://www.luogu.com.cn/problem/P10864) æ™®åŠ+/æé«˜

>  2025-03-18
>
>  ä¹ï¼Œå†™äº†ä¸‰ä¸ªå°æ—¶ã€‚ã€‚ã€‚è™½ç„¶å‰é¢ä¸€ç›´åœ¨å†™é”™è¯¯çš„åšæ³•ã€‚ã€‚
>
>  æœ€åç²¾åŠ›ä¸å¤ªè¡Œäº†ï¼Œå®åœ¨çœ‹ä¸å‡ºæ¥ã€‚ã€‚é—®äº†ä¸‹deepseekï¼Œå¸®æˆ‘æ‰¾åˆ°äº†ä¸€äº›é—®é¢˜ã€‚å› ä¸ºå†™é”™äº†é‡æ–°å†™ä¸€ä¸‹ï¼Œç„¶åå¿˜è®°åˆå§‹åŒ–å¹¶æŸ¥é›†äº†ã€‚ã€‚
>
>  ç„¶åå äº†æ–°æ ¼å­çš„è¯ï¼Œå‘¨å›´æ‰€æœ‰çš„ç‚¹çš„æ°”éƒ½ä¸èƒ½æœ‰è¿™ä¸ªæ ¼å­ã€‚è¿™ä¸€ç‚¹æˆ‘ä¹ŸçŸ¥é“å•Šï¼Œä½†æ˜¯è„‘å­éå¸¸æ··ä¹±äº†ã€‚ã€‚ç„¶åçæ”¹äº†ä¸‹è¿‡äº†ã€‚

è¿˜æ˜¯å¾ˆéº»çƒ¦çš„ä¸€ä¸ªé¢˜çš„ï¼Œç„¶åæˆ‘æ˜¯æ²¡æœ‰æƒ³åˆ°æ¯ä¸ªè¿é€šå—çš„æ°”éƒ½æ”¾é›†åˆé‡Œä¸ä¼šTLE MLEã€‚ã€‚ã€‚ä½†æ˜¯æ¯ä¸ªè¿é€šå—æ¯æ¬¡ DFS BFSç®—æ°”ä¹Ÿæ˜¯æ²¡é—®é¢˜ã€‚ã€‚

ç¡®å®å°±æ˜¯æ¨¡æ‹Ÿã€‚ä¸ç„¶æˆ‘ä¹Ÿå†™ä¸äº†è¿™ä¹ˆä¹…ï¼Œå¯èƒ½å°±ä¸€ç‚¹ä¸œè¥¿éƒ½æ•²ä¸äº†ã€‚

æ„Ÿè§‰ BFS DFS åŒæ ·ä¸å¥½å†™ã€‚çœŸè¦å“ˆæ°”äº†ã€‚

è™½ç„¶æ•ˆç‡å¾ˆä½ï¼Œä½†ä¹Ÿæ˜¯å¤šå†™ä¸€é¢˜å§ã€‚ä¹Ÿè¯¥ä¼‘æ¯ä¸€ä¸‹äº†ã€‚

```cpp
int board[20][20];
int p[20][20];

constexpr int N = 5e5;
int cnt[N + 1], f[N + 1];
// bool vis[N + 1];
// vector<int> f(9);
int find(int x)
{
    return f[x] == x ? x : f[x] = find(f[x]);
}
void ChatGptDeepSeek()
{
    // çœ‹è‡ªå·±ä¸Šä¸‹å·¦å³çš„åŒè‰²çš„
    // å¦‚æœæœ‰ é‚£ä¹ˆåŠ å…¥å®ƒä»¬æ‰€åœ¨çš„è”é€šå—
    // ç”¨å¹¶æŸ¥é›†ç»´æŠ¤è”é€šçš„ä¿¡æ¯
    //
    // çœ‹å®ƒå‘¨å›´çš„é¢œè‰²ä¸åŒçš„ è‹¥æ°”ä¸º0äº† åˆ™è¯¥å…¨éƒ¨ç§»é™¤äº†
    // æ€ä¹ˆç”¨å¹¶æŸ¥é›†å‘¢ï¼Ÿå¥½åƒè¿˜è¡Œ è¯•è¯• ï¼Œå…¶å®æ²¡ç”¨è¿‡å‡ æ¬¡å¹¶æŸ¥é›†ï¼ˆ
    for (int i = 0; i <= 19; i++)
        for (int j = 0; j <= 19; j++)
            board[i][j] = -1;
    int m;
    cin >> m;

    vector<pair<int, int>> dir { { -1, 0 }, { 1, 0 }, { 0, -1 }, { 0, 1 } };
    vector<set<pair<int, int>>> Qi(m + 1, set<pair<int, int>>());

    int res = 0;
    auto Eat = [&](auto&& self, int x, int y, int v) -> void {
        // cerr << x << " " << y << '\n';
        res++;
        assert(x <= 19 && x >= 1 && y <= 19 && y >= 1);
        board[x][y] = -1;
        for (auto it : dir) {
            int nx = x + it.first, ny = y + it.second;
            if (nx > 19 || nx < 1 || ny > 19 || ny < 1 || board[nx][ny] == -1)
                continue;
            if (board[nx][ny] != v) {
                int idx = find(p[nx][ny]);
                assert(idx <= m && idx > 0);

                Qi[idx].insert({ x, y });
            } else
                self(self, nx, ny, v);
        }
    };
    for (int i = 1; i <= m; i++) {
        res = 0;
        int x, y;
        cin >> x >> y;
        board[x][y] = (i % 2);
        p[x][y] = i;
        f[i] = i;

        // å…ˆç®—å‘¨å›´çš„åè‰²çš„æ°”
        for (auto it : dir) {
            int nx = x + it.first, ny = y + it.second;
            if (nx > 19 || nx < 1 || ny > 19 || ny < 1 || board[nx][ny] == -1)
                continue;
            int idx = find(p[nx][ny]);
            // if(!idx) continue;
            assert(idx <= m && idx > 0);

            if (!Qi[idx].empty())
                Qi[idx].erase({ x, y });
            if (p[nx][ny] % 2 != i % 2) {
                // dbg(i, nx, ny);

                if (Qi[idx].empty()) {
                    // dbg(nx, ny, idx);
                    Eat(Eat, nx, ny, p[nx][ny] % 2);
                    // f[idx] = 0;
                }
            }
        }
        for (auto it : dir) {
            int nx = x + it.first, ny = y + it.second;
            if (nx > 19 || nx < 1 || ny > 19 || ny < 1)
                continue;
            if (board[nx][ny] == -1)
                Qi[i].insert({ nx, ny });
        }
        for (auto it : dir) {
            int nx = x + it.first, ny = y + it.second;
            if (nx > 19 || nx < 1 || ny > 19 || ny < 1 || (board[nx][ny] != i % 2))
                continue;
            int idx = find(p[nx][ny]);
            if (idx == i)
                continue;
            assert(idx <= m && idx > 0 && board[nx][ny] == board[x][y]);
            for (auto it : Qi[idx]) {
                // if (board[it.first][it.second] == -1)
                Qi[i].insert(it);
            }
            f[idx] = i;
        }
        // dbg(Qi[i]);
        // cerr << Qi[i].size() << '\n';
        int val = res;
        res = 0;
        if (Qi[i].empty())
            Eat(Eat, x, y, i & 1);
        if (i & 1) {
            cout << res << " " << val << '\n';
        } else {
            cout << val << " " << res << '\n';
        }
        // dbg(Qi[find(1)]);
        // dbg(Qi[2]);
    }
    // æˆ‘è¦å“ˆæ°”äº†
}
```

## [æ´›è°·P4170](https://www.luogu.com.cn/problem/P4170) æé«˜+/çœé€‰-

> 2025-03-25
>
> tag: åŒºé—´DP

$n\le 50$ ï¼Œä½†ç¡®å®ä¸å¤ªå¥½å†™ã€‚

æˆ‘ä»¬éœ€è¦å…ˆå»å¤„ç†é•¿åº¦çŸ­çš„åŒºé—´ã€‚

$dp_{i,j}$ ä¸ºå°† $[i,j]$ åŒºé—´æ¶‚æˆå¯¹åº”é¢œè‰²æ‰€éœ€çš„æ“ä½œæ¬¡æ•°ï¼Œå½“ $i=j$ æ—¶ï¼Œ$dp_{i,j}=1$ ã€‚

é‚£ä¹ˆå½“ $s_l=s_r$ æ—¶ï¼Œ$dp_{l,r}=dp_{l,r-1}$ ï¼Œå¦åˆ™ä¸€å®šè‡³å°‘éœ€è¦ä¸¤æ¬¡æ“ä½œï¼Œæšä¸¾é—´æ–­ç‚¹ $m$ ï¼Œ $dp_{l,r}=min(dp_{l,m},dp_{m+1,r})$ ã€‚

```cpp
// ç¡®å®ï¼Œæˆ‘åˆšåˆšçš„æ€è·¯å®Œå…¨æ˜¯é”™çš„ğŸ˜…

void ChatGptDeepSeek()
{
    string s;
    cin >> s;
    int n = s.size();
    s = " " + s;
    vector<vector<int>> dp(n + 1, vector<int>(n + 1, n));
    for (int i = 1; i <= n; i++)
        dp[i][i] = 1;
    for (int len = 2; len <= n; len++)
    {
        for (int l = 1; l + len - 1 <= n; l++)
        {
            int r = l + len - 1;
            if (s[r] == s[l])
                dp[l][r] = min(dp[l][r], dp[l][r - 1]);
            for (int m = l; m + 1 <= r; m++)
            {
                dp[l][r] = min(dp[l][r], dp[l][m] + dp[m + 1][r]);
            }
        }
    }
    cout << dp[1][n] << '\n';
}
```

## [CF1970E1](https://codeforces.com/contest/1970/problem/E1) *1800

> 2025-03-25

ä¸æ˜¯å“¥ä»¬ï¼Œè¿™èƒ½ç»™1800ã€‚å…¶å®å¾ˆç®€å•å§ã€‚

æˆ‘ä»¬å…¶å®åªéœ€è¦çŸ¥é“æœ‰å¤šå°‘æ¡é•¿è·¯å¤šå°‘æ¡çŸ­è·¯å¯èƒ½èµ°å›æ¥ï¼Œå°±èƒ½çŸ¥é“åœ¨ç¬¬ $i$ æœ‰å¤šå°‘ç§æ–¹å¼å¯ä»¥åˆ°è¾¾æ¯ä¸€ä¸ªæˆ¿å­ã€‚

```cpp
void ChatGptDeepSeek()
{
    constexpr int mod = 1e9 + 7;
    int m, n;
    cin >> m >> n;
    /*
    1 0 1
    0 1 1

    ç¬¬ä¸€å¤© 1->1 1->2 1->3 (S,L)
    ç¬¬äºŒå¤©
    d[1]=1 d[2]=1 d[3]=2

    S=3 L=3
    */
    vector<int> s(m + 1), l(m + 1);
    for (int i = 1; i <= m; i++)
        cin >> s[i];
    for (int i = 1; i <= m; i++)
        cin >> l[i];
    ll S = s[1], L = l[1];
    vector<ll> ways(m + 1);
    for (int i = 1; i <= n; i++)
    {
        ll nS = 0, nL = 0;
        for (int j = 1; j <= m; j++)
        {
            ways[j] = (1LL * s[j] * (S + L) % mod + 1LL * l[j] * S % mod) % mod;
            nS = (nS + 1LL * ways[j] * s[j] % mod) % mod;
            nL = (nL + 1LL * ways[j] * l[j] % mod) % mod;
            // cerr << ways[j] << " \n"[j == m];
        }
        S = nS, L = nL;
        // cerr << S << " " << L << '\n';
    }
    ll ans = 0;
    for (int i = 1; i <= m; i++)
    {
        ans = (ans + ways[i]) % mod;
    }
    cout << ans << '\n';
}
```

## [æ´›è°·P1013](https://www.luogu.com.cn/problem/P1013) æ™®åŠ+/æé«˜

> 2025-03-28

å¾ˆæ°´çš„ä¸€ä¸ªé¢˜ç›®äº†ï¼Œç›´æ¥å…¨æ’åˆ—æšä¸¾å³å¯ï¼ŒäºŒååˆ†é’Ÿå†™å®Œäº†ã€‚æ„Ÿè§‰éš¾åº¦è¯„é«˜äº†ç‚¹ï¼Œä½†æ˜¯ä¹‹å‰çœ‹è¿‡ä¸€çœ¼é¢˜ç›®ï¼Œæ„Ÿè§‰ä¸å¤ªæƒ³å†™ã€‚ä½†æ˜¯è¿™æ¬¡çœ‹äº†ä¸€ä¼šæ€€ç–‘æ˜¯æ°´é¢˜ï¼Œç»“æœç¡®å®å·®ä¸å¤šã€‚

ä½†æ˜¯è¿˜æ˜¯ä¹Ÿå¾—æœ‰ç‚¹è€å¿ƒå†™å’Œæ€è€ƒå§ã€‚

ç”±äºæ¯ä¸ªæ•°å­—éƒ½ä¸åŒï¼Œè€Œä¸”æ‰€æœ‰æ•°å­—éƒ½ä¼šä¸¤ä¸¤åŠ ä¸€èµ·ï¼Œæ‰€ä»¥å¦‚æœæ˜¯åˆæ³•æ–¹æ¡ˆï¼Œä¸€å®šæ˜¯è¡¨ç¤ºçš„ $n-1$ è¿›åˆ¶çš„åŠ æ³•ã€‚ç›´æ¥æšä¸¾æ¯ä¸ªç¬¦å·æ˜¯å“ªä¸ªå€¼å³å¯ã€‚

```cpp
void ChatGptDeepSeek()
{
    int n;
    cin >> n;
    vector<vector<string>> s(n, vector<string>(n));
    for (int i = 0; i < n; i++)
        for (int j = 0; j < n; j++)
            cin >> s[i][j];
    vector<int> p(n - 1);
    iota(p.begin(), p.end(), 0);
    auto check = [&]()
    {
        vector<int> q(129);
        for (int i = 0; i < n - 1; i++)
            q[s[0][i + 1][0]] = p[i];
        vector<vector<int>> a(n, vector<int>(n));
        for (int i = 1; i < n; i++)
            a[0][i] = p[i - 1];
        for (int i = 1; i < n; i++)
            a[i][0] = p[i - 1];
        auto get = [&](string x)
        {
            int res = 0;
            for (auto y : x)
                res = res * (n - 1) + q[y];
            return res;
        };
        for (int i = 1; i < n; i++)
            for (int j = 1; j < n; j++)
            {
                // if (i == j && i == 1)
                // {
                //     cerr << p[i - 1] << " " << p[j - 1] << " " << get(s[i][j]) << '\n';
                // }
                if (p[i - 1] + p[j - 1] != get(s[i][j]))
                    return false;
            }
        return true;
    };
    do
    {
        if (check())
        {
            for (int i = 1; i < n; i++)
                cout << s[0][i] << "=" << p[i - 1] << " \n"[i + 1 == n];
            cout << n - 1 << '\n';
            return;
        }
    } while (next_permutation(p.begin(), p.end()));
    cout << "ERROR!\n";
}
```

## æ´›è°·P10915 æ™®åŠ+/æé«˜

> 2025-03-28

è“æ¡¥æ¯24 Bç»„å›½èµ›é¢˜ç›®ï¼Ÿä½†æ˜¯æˆ‘æ„Ÿè§‰æ²¡è§è¿‡ï¼Œå¯èƒ½æ˜¯ Java æˆ–è€… Python ç»„çš„å§ï¼Œä¹Ÿå¯èƒ½æ˜¯ C++ çš„ï¼ˆï¼‰ã€‚

æˆ‘ä»¬å¯ä»¥åˆ é™¤ä¸€ä¸ªå­ä¸²ï¼Œå‡è®¾æˆ‘ä»¬çš„ç­”æ¡ˆçš„å‰ç¼€çš„é•¿åº¦æ˜¯ `len` ï¼Œæˆ‘ä»¬åˆ‡å‰²å­ä¸²ä¹‹åï¼Œå¿…ç„¶å‰ç¼€å’Œåç¼€è‡³å°‘æœ‰ä¸€ä¸ªçš„é•¿åº¦æ˜¯å¤§äºç­‰äº `len` ã€‚æ‰€ä»¥æˆ‘ä»¬çš„ç­”æ¡ˆçš„å‰åŠéƒ¨åˆ†æˆ–è€…ååŠéƒ¨åˆ†ï¼Œå¿…ç„¶æ˜¯ $s$ çš„ä¸€ä¸ªå‰ç¼€æˆ–è€…ä¸€ä¸ªåç¼€ã€‚

è‹¥ `len` æ˜¯ä»¥å¾—åˆ°çš„å‰ç¼€é•¿åº¦ï¼Œé‚£ä¹ˆ `[1, len-1]` å¿…ç„¶ä¹Ÿæ˜¯å¯ä»¥å¾—åˆ°çš„é•¿åº¦ï¼Œåªéœ€è¦å¤šåˆ ä¸€éƒ¨åˆ†å°±è¡Œã€‚

æ‰€ä»¥æˆ‘ä»¬å¯ä»¥ç”¨äºŒåˆ†æ¥æ±‚æœ€é•¿çš„é•¿åº¦ï¼Œé‚£ä¹ˆç”±äºåˆ‡å‰²åè‡³å°‘æœ‰ä¸€è¾¹çš„é•¿åº¦æ˜¯å¤§äºç­‰äº `len` ï¼Œæ‰€ä»¥è¦ä¹ˆå‰é¢æ˜¯ `s[1, len]` ï¼Œè¦ä¹ˆåé¢æ˜¯ `s[n-len+1, n]` ã€‚

æˆ‘ä»¬å¯ä»¥åªç”¨è€ƒè™‘ç­”æ¡ˆçš„å‰ç¼€å®Œå…¨ä¸º $s$ çš„å‰ç¼€çš„æƒ…å†µï¼Œå¦ä¸€ç§æƒ…å†µå¯ä»¥é€šè¿‡ç¿»è½¬ $s$ æ¥æ±‚è§£ç­”æ¡ˆã€‚

å‡è®¾ `t = s[1, len]` ï¼Œ$t'=reverse(t)$ é‚£ä¹ˆæˆ‘ä»¬å®é™…ä¸Šå°±æ˜¯è¦åœ¨ `s[len+1, n]` ä¹‹ä¸­æ‰¾åˆ°ä¸€ä¸ªå­—ç¬¦ä¸² $t'$ ï¼Œä½†æ˜¯ $t'$ å¯èƒ½æ˜¯åœ¨ $s[len+1, n]$è¢«åˆ†æˆä¸¤æ®µçš„ã€‚ç”±äºç­”æ¡ˆçš„åç¼€å¿…é¡»æ˜¯åˆ‡å‰²åçš„å­—ç¬¦ä¸²çš„åç¼€ã€‚æœ‰å¯èƒ½æ˜¯æŠŠæœ«å°¾ä¸€éƒ¨åˆ†åˆ‡äº†ï¼Œæœ‰å¯èƒ½æŠŠä¸­é—´çš„æŸä¸€éƒ¨åˆ†åˆ‡äº†ã€‚

æˆ‘ä»¬å¯ä»¥ä»æœ«å°¾çœ‹ $t$ å’Œ $s$ çš„è¿™ä¸€ä½æ˜¯å¦ç›¸ç­‰ï¼Œè‹¥ç›¸ç­‰åˆ™æŠŠ $t$ çš„æœ«å°¾åˆ é™¤ã€‚ç„¶åæœ€åæˆ‘ä»¬åªéœ€è¦åœ¨ $s[len+1,n]$ ä¸­æŸ¥æ‰¾æ–°çš„ $t$ ã€‚

å¯ä»¥ç”¨ KMP ç®—æ³•æ±‚ï¼Œå•æ¬¡ check æ—¶é—´å¤æ‚åº¦ä¸º $O(n)$ ã€‚

```cpp
int solve(string s)
{
    int n = s.size();
    auto check = [&](int len)
    {
        string t = s.substr(0, len);
        reverse(t.begin(), t.end());
        for (int i = n - 1; i >= n - len; i--)
        {
            if (t.back() == s[i])
                t.pop_back();
            else
                break;
        }

        if (t.empty())
            return true;
        int i = len, m = t.size();
        vector<int> p(m);
        for (int i = 1; i < m; i++)
        {
            int j = i - 1;
            while (j > 0 && t[i] != t[j])
                j = p[j - 1];
            p[i] = j;
            if (t[i] == t[j])
                p[i]++;
        }
        int j = 0;
        while (i < n)
        {
            while (j > 0 && s[i] != t[j])
                j = p[j - 1];
            if (s[i] == t[j])
                i++, j++;
            else
                i++; // å¦‚æœä¸ç›¸ç­‰ é‚£ä¹ˆj å¿…ç„¶ç­‰äº0 æ‰€ä»¥ç›´æ¥çœ‹ä¸‹ä¸€ä¸ª1
            if (j == t.size())
                return true;
        }
        return false;
    };
    int lo = 0, hi = n / 2 + 1;
    while (lo < hi - 1)
    {
        int mid = (lo + hi) >> 1;
        if (check(mid))
            lo = mid;
        else
            hi = mid;
    }
    return lo;
}
void ChatGptDeepSeek()
{
    string s;
    cin >> s;
    int ans = solve(s);
    reverse(s.begin(), s.end());
    ans = max(ans, solve(s));
    cout << ans << '\n';
}
```
